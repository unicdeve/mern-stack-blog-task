{"version":3,"sources":["../../src/config/check-auth.js"],"names":["opts","jwtFromRequest","ExtractJwt","fromAuthHeaderAsBearerToken","secretOrKey","SECRET_OR_KEY","passport","use","Strategy","jwt_payload","done","User","findById","id","then","user","catch","console","log","err"],"mappings":";;;;;;AAAA;;AAEA;;AACA;;;;;;AAEA,IAAMA,OAAO,EAAb;AACAA,KAAKC,cAAL,GAAsBC,wBAAWC,2BAAX,EAAtB;AACAH,KAAKI,WAAL,GAAmBC,oBAAnB;;kBAEe,oBAAY;AACzBC,WAASC,GAAT,CACE,IAAIC,qBAAJ,CAAaR,IAAb,EAAmB,UAACS,WAAD,EAAcC,IAAd,EAAuB;AACxCC,mBAAKC,QAAL,CAAcH,YAAYI,EAA1B,EACGC,IADH,CACQ,gBAAQ;AACZ,UAAIC,IAAJ,EAAU,OAAOL,KAAK,IAAL,EAAWK,IAAX,CAAP;;AAEV,aAAOL,KAAK,IAAL,EAAW,KAAX,CAAP;AACD,KALH,EAMGM,KANH,CAMS;AAAA,aAAOC,QAAQC,GAAR,CAAYC,GAAZ,CAAP;AAAA,KANT;AAOD,GARD,CADF;AAWD,C","file":"check-auth.js","sourcesContent":["import { Strategy, ExtractJwt } from 'passport-jwt';\n\nimport { SECRET_OR_KEY } from '../constants/index';\nimport User from '../modules/user/user.model';\n\nconst opts = {};\nopts.jwtFromRequest = ExtractJwt.fromAuthHeaderAsBearerToken();\nopts.secretOrKey = SECRET_OR_KEY;\n\nexport default passport => {\n  passport.use(\n    new Strategy(opts, (jwt_payload, done) => {\n      User.findById(jwt_payload.id)\n        .then(user => {\n          if (user) return done(null, user);\n\n          return done(null, false);\n        })\n        .catch(err => console.log(err));\n    })\n  );\n};\n"]}